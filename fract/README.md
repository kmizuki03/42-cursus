# fractol - フラクタル図形の可視化プログラム

## 1. 目的

本課題では、複素数の反復計算を用いてフラクタル図形（マンデルブロ集合、ジュリア集合など）を生成し、グラフィカルに可視化するプログラムを実装する。複素数の数学的性質と、コンピュータグラフィックスの基礎を理解することを目的とする。

## 2. 背景

フラクタルは、自己相似性を持つ幾何学的図形であり、複素数の反復計算によって生成される。特にマンデルブロ集合は、数学的に非常に興味深い性質を持ち、わずかなパラメータの変化で大きく異なる図形が生成されることが知られている。本プログラムでは、これらのフラクタルをインタラクティブに探索できるように実装する。

## 3. 実装内容

### 3.1 対応するフラクタル

- **マンデルブロ集合（Mandelbrot Set）**: `z = z² + c`の反復計算で、発散しない点の集合
- **ジュリア集合（Julia Set）**: マンデルブロ集合と同様の式だが、定数`c`を固定したもの

### 3.2 グラフィックスライブラリ

MiniLibX（42の標準グラフィックスライブラリ）を使用して、ウィンドウの作成、画像の描画、イベント処理を実装した。

### 3.3 インタラクティブ機能

- **ズーム機能**: マウスホイールで拡大・縮小
- **パン機能**: 矢印キーで表示領域を移動
- **色の変更**: 反復回数に応じた色付け
- **ジュリア集合のパラメータ変更**: コマンドライン引数で初期値を指定可能

## 4. 技術的な工夫点

### 4.1 複素数計算の実装

複素数を構造体として定義し、加算、乗算、絶対値計算などの基本演算を実装した。特に、`z = z² + c`の計算を効率的に行うため、実部と虚部を分けて計算した。

### 4.2 反復計算の最適化

各ピクセルに対して、発散判定を行う反復計算を実行した。発散の判定には、`|z| > 2`という条件を使用した（この条件は、マンデルブロ集合の数学的性質に基づいている）。

### 4.3 色付けアルゴリズム

反復回数に応じて色を決定するアルゴリズムを実装した。発散する点は反復回数に応じた色で、発散しない点（集合内の点）は黒で表示する。

### 4.4 座標変換

画面座標（ピクセル位置）を複素平面の座標に変換する処理を実装した。ズームやパン機能を実現するため、オフセットとスケールファクターを管理した。

### 4.5 パフォーマンス最適化

- 画像の直接メモリアクセスによる高速描画
- 反復回数の上限設定による計算時間の制御
- 必要に応じて再描画をトリガーするイベント処理

## 5. 使用方法

```bash
# マンデルブロ集合を表示
./fractol m

# ジュリア集合を表示（デフォルトパラメータ）
./fractol j

# ジュリア集合を表示（カスタムパラメータ）
./fractol j 0.285 0.01
```

### 5.1 操作

- **マウスホイール**: ズームイン/ズームアウト
- **矢印キー**: 表示領域の移動
- **ESCキー**: プログラム終了

## 6. 考察

本課題を通じて、数学的な概念（複素数、フラクタル）をコンピュータプログラムとして実装し、視覚化する経験を得た。複素数の数学的性質と、フラクタルの生成原理について理解を深めた。また、グラフィックスプログラミングの基礎（ピクセル操作、イベント処理）と、座標変換による数学的モデルと画面表示の対応関係について実践的な知識を得た。フラクタルの数学的性質と、コンピュータグラフィックスにおける可視化技術の実装について、実践的な知識を獲得した。これらの知識は、今後のグラフィックスプログラミングにおいて有用となるだろう。

